numElectrodes = 64;
numSegments = 123;
segmentLength = 160;



% Preallocate the final matrix
noneDataMatrix = zeros(numSegments * segmentLength, numElectrodes);

% Process each electrode
for electrodeIdx = 1:numElectrodes
    % Extract data for the current electrode
    electrodeData = edf_data{:, electrodeIdx};
    
    % Initialize an empty vector to concatenate data points
    concatenatedData = [];
    
    % Concatenate data from each segment
    for segmentIdx = 1:numSegments
        concatenatedData = [concatenatedData; electrodeData{segmentIdx}];
    end
    
    % Store the concatenated data in the final matrix
    noneDataMatrix(:, electrodeIdx) = concatenatedData;
end

data = noneDataMatrix;


% Define the cell arrays
current_channel_names = {'Fc5', 'Fc3', 'Fc1', 'Fcz', 'Fc2', 'Fc4', 'Fc6', 'C5', 'C3', 'C1', 'Cz', ...
    'C2', 'C4', 'C6', 'Cp5', 'Cp3', 'Cp1', 'Cpz', 'Cp2', ...
    'Cp4', 'Cp6', 'Fp1', 'Fpz', 'Fp2', 'Af7', 'Af3', 'Afz', ...
    'Af4', 'Af8', 'F7', 'F5', 'F3', 'F1', 'Fz', 'F2', 'F4', 'F6', ...
    'F8', 'Ft7', 'Ft8', 'T7', 'T8', 'T9', 'T10', 'Tp7', 'Tp8', 'P7', ...
    'P5', 'P3', 'P1', 'Pz', 'P2', 'P4', 'P6', 'P8', 'Po7', 'Po3', 'Poz', ...
    'Po4', 'Po8', 'O1', 'Oz', 'O2', 'Iz'};

desired_channel_names = {'Fp1','Af7','Af3','F1','F3','F5','F7','Ft7','Fc5','Fc3','Fc1','C1','C3','C5','T7','Tp7','Cp5','Cp3','Cp1', ...
    'P1','P3','P5','P7','P9','Po7','Po3','O1','Iz','Oz','Poz','Pz','Cpz','Fpz','Fp2','Af8','Af4','Afz','Fz', ...
    'F2','F4','F6','F8','Ft8','Fc6','Fc4','Fc2','Fcz','Cz','C2','C4','C6','T8','Tp8','Cp6','Cp4','Cp2','P2', ...
    'P4','P6','P8','P10','Po8','Po4','O2'};

% Find unique channels in both arrays
unique_in_current = setdiff(current_channel_names, desired_channel_names);
unique_in_desired = setdiff(desired_channel_names, current_channel_names);

% Replace unique channels with 'X' in current_channel_names
for i = 1:length(current_channel_names)
    if ismember(current_channel_names{i}, unique_in_current)
        current_channel_names{i} = 'X';
    end
end

% Replace unique channels with 'X' in desired_channel_names
for i = 1:length(desired_channel_names)
    if ismember(desired_channel_names{i}, unique_in_desired)
        desired_channel_names{i} = 'X';
    end
end


% Example data matrix
% data = ... % Your EDF data matrix (rows are time points, columns are channels)

% Initialize an empty matrix for reordered data
reordered_data = zeros(size(data, 1), length(desired_channel_names));

% Reorder columns according to the desired channel names
for i = 1:length(desired_channel_names)
    if strcmp(desired_channel_names{i}, 'X')
        % Fill with zeros or handle as needed for missing channels
        reordered_data(:, i) = 0; % Or some other handling
    else
        % Find the index of the current desired channel in the current channel names
        idx = find(strcmp(current_channel_names, desired_channel_names{i}));
        if ~isempty(idx)
            % Reorder columns
            reordered_data(:, i) = data(:, idx);
        else
            error('Channel %s not found in current channel names.', desired_channel_names{i});
        end
    end
end

% Update the data and channel names
data = reordered_data;
current_channel_names = desired_channel_names;

% Save or use the reordered data as needed
% For example, you could save the reordered data to a new EDF file



Data = data;



Data = Data(3000:5052,:); % 3 seconds
Data = Data(1:end-1,:);

Data = Data';


coordinates = importdata("coordinates.csv");

X = coordinates(1,:);
Y = coordinates(2,:);
Z = coordinates(3,:);


surf_lapP = laplacian_perrinX(Data,X,Y,Z,[],1e-5); 


data = surf_lapP';



% Define sampling frequency
fs = 160; % Hz

% Define alpha frequency range (8-12 Hz)
alpha_band = [8, 12]; % Hz


D_data = [ data(:,3) , data(:,1), data(:,33), data(:,34), data(:,36) ] *100000;







%Filter our data 
[b, a] = butter(4, alpha_band / (fs / 2), 'bandpass');
rest_data_filtered = filter(b, a, D_data);
hello_data_filtered = abs((rest_data_filtered)) .^2;



greetings_data_filtered = hello_data_filtered(769:end-768,:);



Adj1 = zeros(5,5)


for i = 1:3
	Adj1 = Adj1 +corr(greetings_data_filtered(1+(i-1)*160:i*160, :),'Type', 'Spearman');

end

Adj1 = Adj1/3






C_data = [ data(:,37) , data(:,4), data(:,38), data(:,39) ]  *100000;




% Define sampling frequency
fs = 160; % Hz

% Define alpha frequency range (8-12 Hz)
beta_band = [13, 30]; % Hz

[b, a] = butter(4, beta_band / (fs / 2), 'bandpass');




task_data_filtered = filter(b, a, C_data);
bye_data_filtered = abs((task_data_filtered)) .^2;

sal_data_filtered = bye_data_filtered(769:end-768,:);




Adj2 = zeros(4,4)

for i = 1:3
	Adj2 = Adj2 + corr(sal_data_filtered(1+(i-1)*160:i*160, :),'Type', 'Spearman');
end
Adj2 = Adj2 / 3





mean(mean(Adj1))
mean(mean(Adj2))



numElectrodes = 64;
numSegments = 240;
segmentLength = 1024;



% Preallocate the final matrix
allDataMatrix = zeros(numSegments * segmentLength, numElectrodes);

% Process each electrode
for electrodeIdx = 1:numElectrodes
    % Extract data for the current electrode
    electrodeData = edf_data{:, electrodeIdx};
    
    % Initialize an empty vector to concatenate data points
    concatenatedData = [];
    
    % Concatenate data from each segment
    for segmentIdx = 1:numSegments
        concatenatedData = [concatenatedData; electrodeData{segmentIdx}];
    end
    
    % Store the concatenated data in the final matrix
    allDataMatrix(:, electrodeIdx) = concatenatedData;
end


data = allDataMatrix;

Data = data;

Data = Data(3000:7608,:);
Data = Data(1:end-1,:);


Data = Data';


coordinates = importdata("coordinates.csv");

X = coordinates(1,:);
Y = coordinates(2,:);
Z = coordinates(3,:);


surf_lapP = laplacian_perrinX(Data,X,Y,Z,[],1e-5); 


data = surf_lapP';



% Define sampling frequency
fs = 1024; % Hz

% Define alpha frequency range (8-12 Hz)
alpha_band = [8, 12]; % Hz


D_data = [ data(:,3) , data(:,1), data(:,33), data(:,34), data(:,36) ] *100000;





%Filter our data 
[b, a] = butter(4, alpha_band / (fs / 2), 'bandpass');
rest_data_filtered = filter(b, a, D_data);
hello_data_filtered = abs((rest_data_filtered)) .^2;



greetings_data_filtered = hello_data_filtered(769:end-768,:);



Adj1 = zeros(5,5)


for i = 1:3
	Adj1 = Adj1 +corr(greetings_data_filtered(1+(i-1)*1024:i*1024, :),'Type', 'Spearman');

end

Adj1 = Adj1/3




C_data = [ data(:,37) , data(:,4), data(:,38), data(:,39) ]  *100000;








% Define sampling frequency
fs = 1024; % Hz

% Define alpha frequency range (8-12 Hz)
beta_band = [13, 30]; % Hz

[b, a] = butter(4, beta_band / (fs / 2), 'bandpass');




task_data_filtered = filter(b, a, C_data);
bye_data_filtered = abs((task_data_filtered)) .^2;

sal_data_filtered = bye_data_filtered(769:end-768,:);




Adj2 = zeros(4,4)

for i = 1:3
	Adj2 = Adj2 + corr(sal_data_filtered(1+(i-1)*1024:i*1024, :),'Type', 'Spearman');
end
Adj2 = Adj2 / 3


DMN_means(1) = mean(mean(Adj1));
CEN_means(1) = mean(mean(Adj2));